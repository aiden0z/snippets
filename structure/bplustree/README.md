# B+ 树

* 根节点至少包含两个子节点；
* 根节点到每个叶子节点的高度一致（叶子节点都在同一层）；
* 任意节点最多包含 m-1 个关键字 key，最少 ⌈m/2⌉-1 （m/2 向上取整减 1, 或最少 m/2 向下取整）个关键字 key；
* 每个节点中的关键字都按从小到大顺序排列，每个关键字的左子树中的所有关键字都小于它，而右子树中的所有关键字都大于它
* 非根节点之多可以包含 m 个子节点，和至少 m/2 个子节点；
* 叶子节点包含了所有的关键字 key 信息和真正存储的数据信息，非叶子节点只有关键字信息，没有数据信息；
* 所有叶子节点类似链表一样链接在一起；

## 应用场景

很多数据库都基于 B+ 树实现索引。基于以下几个特性：

1. 只有叶子节点存储数据，或指向数据存储地址；
2. 整颗树高度较小，查找节点时 IO 次数更少，节省时间；
3. 叶子节点有序链接，能快速进行范围内查询；


## 实现细节

1. 有最大的 度 限制，也就是每个节点包含的最大子节点数；
2. 子节点通常有指针指向父节点；
3. 通常在 B+ 树实现是有两个指针分别用于指向根节点和关键字最小的叶子节点。这样就可以对 B+ 树进行两种搜索，一种是从最小关键字开始顺序查找，另一种是从根节点开始；

### 搜索节点

### 插入节点

插入节点分为两种情况：

#### Case 1

1. 如果叶子节点未满，则找到插入位置直接插入即可；

#### Case 2

1. 如果叶子节点已满，则找到插入位置插入节点，并按以下方式调整；
2. 将节点在 m/2 位置分割为两个节点；
3. 将 m/2 位置的关键字移到父节点；
4. 如果父节点也满了，则重复 2 到 3 步；

### 删除节点